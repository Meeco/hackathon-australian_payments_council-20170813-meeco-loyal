<ion-header>
    <ion-navbar>
      <ion-title>Loyalty</ion-title>
    </ion-navbar>
  </ion-header>
  
  <ion-content padding>
    <div *ngIf="loading">
      <p>Searching for Loyalty programs...</p>
      <ion-spinner></ion-spinner>
    </div>

    {{message}}
    <ion-list>
      <div *ngFor="let domain of domains$ | async">
        <ion-item>
          <b>{{domain[0]}}</b><br/>
          <div class="offer">
              <ion-badge color="secondary" *ngIf="domain[1].length > 0">{{domain[1].length}} Offers</ion-badge>
              <button ion-button *ngIf="domain[1].length > 0" (click)="open(domain[0], domain[1])">Join</button>            
              <button ion-button *ngIf="domain[1].length == 0" (click)="open(domain[0], domain[1])">Compare</button>
          </div>
        </ion-item>
      </div>
    </ion-list>
  
  </ion-content>
  